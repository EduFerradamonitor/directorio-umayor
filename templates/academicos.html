@app.route("/api/academicos")
def api_academicos():
    q = request.args.get("q", "").strip().lower()

    if len(q) < 2:
        return jsonify([])

    query = (
        supabase
        .table("otros_contactos_academicos")
        .select("""
            nombre,
            cargo,
            departamento,
            correo_director,
            secretaria_nombre,
            secretaria_correo,
            anexo_director,
            anexo_secretaria,
            consultar_antes_de_entregar_contactos
        """)
        .ilike("departamento_busqueda", f"%{q}%")
    )

    result = query.execute()
    return jsonify(result.data or [])
